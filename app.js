!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},r={},n={},a={}.hasOwnProperty,o=/^\.\.?(\/|$)/,i=function(e,t){for(var r,n=[],a=(o.test(t)?e+"/"+t:t).split("/"),i=0,s=a.length;s>i;i++)r=a[i],".."===r?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},d=function(t){return function(r){var n=i(s(t),r);return e.require(n,t)}},c=function(e,t){var n=null;n=v&&v.createHot(e);var a={id:e,exports:{},hot:n};return r[e]=a,t(a.exports,d(e),a),a.exports},l=function(e){return n[e]?l(n[e]):e},p=function(e,t){return l(i(s(e),t))},u=function(e,n){null==n&&(n="/");var o=l(e);if(a.call(r,o))return r[o].exports;if(a.call(t,o))return c(o,t[o]);throw new Error("Cannot find module '"+e+"' from '"+n+"'")};u.alias=function(e,t){n[t]=e};var h=/\.[^.\/]+$/,g=/\/index(\.[^\/]+)?$/,f=function(e){if(h.test(e)){var t=e.replace(h,"");a.call(n,t)&&n[t].replace(h,"")!==t+"/index"||(n[t]=e)}if(g.test(e)){var r=e.replace(g,"");a.call(n,r)||(n[r]=e)}};u.register=u.define=function(e,n){if("object"==typeof e)for(var o in e)a.call(e,o)&&u.register(o,e[o]);else t[e]=n,delete r[e],f(e)},u.list=function(){var e=[];for(var r in t)a.call(t,r)&&e.push(r);return e};var v=e._hmr&&new e._hmr(p,u,t,r);u._cache=r,u.hmr=v&&v.wrap,u.brunch=!0,e.require=u}}(),function(){window;require.register("application.js",function(e,t,r){"use strict";var n=t("jquery"),a=t("scripts/Graph"),o={},i={last:new Date,obj:null},s=(new a,{init:function(){switch(n("input[type='radio'][name='graph']:checked").val()){case"cyto":o=t("scripts/graphCyto");break;default:o=t("scripts/graphViva")}o.init(n("#cy")),o.test(),n("input[type='radio'][name='graph']").change(function(e,r,a){o.clear(),o=t("cyto"==this.value?"scripts/graphCyto":"scripts/graphViva"),o.init(n("#cy")),o.test()});var e=new Worker("workers/dataloader.js");e.addEventListener("message",function(t){if(t.data.indexLoaded)n("#search").on("input",function(t){var r=n(this).val(),a=new Date;a-i.last<150&&i.obj&&(console.log("clearing last"),clearTimeout(i.obj)),i.last=a,r.length>2?i.obj=setTimeout(function(){e.postMessage({cmd:"search",text:r}),o.clear()},150):n("#results").html("")});else if(t.data.graph)Object.keys(t.data.graph).forEach(function(e){t.data.graph[e].children.length>0&&t.data.graph[e].children.forEach(function(r){o.addNodes({id:e,label:t.data.graph[e].description},{id:r,label:t.data.graph[r].description})})}),o.layout();else if(t.data.results&&t.data.results.length>0)console.time("Display graph"),e.postMessage({cmd:"graph",node:t.data.results[0].code}),console.timeEnd("Display graph"),console.time("Display results"),n("#results").html(""),t.data.results.forEach(function(e){n("#results").append("<div>"+e.code+": "+e.description+"</div>")}),console.timeEnd("Display results");else if(t.data.progress){if(t.data.file){var r=Math.floor(t.data.progress/2);t.data.progress<100?n("#progress").html('<span class="progress">'+new Array(r).join('<span class="loaded">█</span>')+new Array(51-r).join('<span class="loading">█</span>')+"</span> - "+t.data.file+" - LOADING..."):n("#progress").html('<span class="progress">'+new Array(r).join('<span class="loaded">█</span>')+new Array(51-r).join('<span class="loading">█</span>')+"</span> - "+t.data.file+" - COMPLETED")}}else console.log(t.data)}),e.postMessage({cmd:"load",url:document.URL})}});r.exports=s}),require.register("scripts/Array.js",function(e,t,r){"use strict";var n=function(){Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}};Array.isArray||n(),r.exports={addIsArray:n}}),require.register("scripts/Graph.js",function(e,t,r){"use strict";t("./Array");var n=function(){this.graph={},this.nodes=function(){return Object.keys(this.graph)},this.hasNode=function(e){return this.nodes().indexOf(e)>-1},this.addNode=function(e,t){this.hasNode(e)||(t?this.graph[e]=t:this.graph[e]={description:[],children:[],parent:[]})},this.prop=function(e,t,r){if(this.hasNode(e)){if(void 0===r)return this.graph[e][t];this.graph[e][t]=r}},this.propDelete=function(e,t){this.hasNode(e)&&delete this.graph[e][t]},this.node=function(e){return this.graph[e]},this.merge=function(e){var t=this;Array.isArray(e)||(e=[e]),e.forEach(function(e){e.nodes().forEach(function(r){t.addNode(r,e.node(r))})})},this.included=function(){var e=this;return[].concat(this.nodes().filter(function(t){return e.node(t).include}))},this.excluded=function(){var e=this;return[].concat(this.nodes().filter(function(t){return!e.node(t).include}))},this.connectedSubgraphs=function(){var e,t,r,a=[],o=[],i=this;return i.nodes().forEach(function(e){i.prop(e,"unvisited",!0)}),i.nodes().forEach(function(s){if(i.prop(s,"unvisited")){var d=new n;for(o.push(s);o.length>0;){t=o.splice(0,1)[0],d.addNode(t,i.node(t));var c=i.prop(t,"children").concat(i.prop(t,"parent"));for(e=0;e<c.length;e+=1)r=c[e],i.prop(r,"unvisited")&&(i.propDelete(r,"unvisited"),o.push(r))}a.push(d)}}),a},this.getDescendents=function(e){var t,r,n=[],a=this,o=[].concat(a.prop(e,"children"));for(a.nodes().forEach(function(e){a.prop(e,"unvisited",!0)});o.length>0;)if(r=o.splice(0,1)[0],a.prop(r,"unvisited"))for(a.propDelete(r,"unvisited"),n.push(r),t=a.prop(r,"children").length-1;t>=0;t-=1)e=a.prop(r,"children")[t],a.prop(e,"unvisited")&&o.unshift(e);return n},this.displayChildrenInTree=function(e){var t,r,n,a=this,o=[].concat(a.prop(e,"children"));for(a.nodes().forEach(function(e){a.prop(e,"unvisited",!0)});o.length>0;)if(r=o.splice(0,1)[0],a.prop(r,"unvisited")){a.propDelete(r,"unvisited"),n="",a.prop(r,"include")&&(n="  INCLUDED".cyan),a.prop(r,"include")===!1&&(n="  REJECTED".red),console.log(new Array(3*a.prop(r,"depth")).join(" ")+"+-- ".white+"CHILD: ".yellow+r+"-"+a.prop(r,"description").join(" | ").yellow+n);var i=a.prop(r,"children");for(t=i.length-1;t>=0;t-=1)e=i[t],a.prop(e,"unvisited")&&o.unshift(e)}},this.addDepth=function(){var e,t,r,n=[],a=this;return a.nodes().forEach(function(e){a.prop(e,"visited",0),a.prop(e,"depth",0)}),a.nodes().forEach(function(o){if(!(a.prop(o,"visited")||a.prop(o,"parent").length>0))for(n.push(o);n.length>0;){t=n.splice(0,1)[0];var i=a.prop(t,"children");for(e=0;e<i.length;e+=1)r=i[e],a.prop(r,"visited")<a.prop(r,"parent").length-1?a.prop(r,"visited",a.prop(r,"visited")+1):a.prop(r,"visited")===a.prop(r,"parent").length-1&&(a.propDelete(r,"visited"),a.prop(r,"depth",a.prop(t,"depth")+1),n.push(r))}}),a}};n.merge=function(e){var t=new n;return t.merge(e),t},r.exports=n}),require.register("scripts/dataloader.js",function(e,t,r){r.exports=function(e,t){var r=function(t){t.lengthComputable&&e.postMessage({progress:t.loaded})},n=function(e,t){console.time("Loading: "+e);var n=new XMLHttpRequest;n.onprogress=r,n.open("GET",e,!0),n.onreadystatechange=function(){if(4==n.readyState&&(console.timeEnd("Loading: "+e),200==n.status))try{var r=JSON.parse(n.responseText);return t(null,r)}catch(a){return t(a)}},n.send(null)};console.time("importing lunr.js"),importScripts("https://cdnjs.cloudflare.com/ajax/libs/lunr.js/0.7.1/lunr.min.js"),console.timeEnd("importing lunr.js"),e.loadIndex=function(t,r){n(t+"data/data_index.json",function(t,n){return t?r(t):(console.time("loading index"),e.index=lunr.Index.load(n),console.timeEnd("loading index"),r(null))})},e.loadGraph=function(t,r){console.time("loading graph"),n(t+"data/data_graph.json",function(t,n){return t?r(t):(e.graph=n,r(null))})},e.load=function(t,r){e.loadGraph(t,function(n){return n?r(n):void e.loadIndex(t,function(e){return r(e?e:null)})})},e.addEventListener("message",function(t){var r=t.data;switch(r.cmd){case"loadGraph":e.postMessage("WORKER STARTED: "+r.cmd),e.loadGraph(r.url,function(t){t?e.postMessage("WORKER ERROR: "+t):e.postMessage("WORKER GRAPH LOADED")});break;case"loadIndex":e.postMessage("WORKER STARTED: "+r.cmd),e.loadIndex(r.url,function(t){t?e.postMessage("WORKER ERROR: "+t):e.postMessage("WORKER INDEX LOADED")});break;case"load":e.postMessage("WORKER STARTED: "+r.cmd),e.load(r.url,function(t,r,n){t?e.postMessage("WORKER ERROR: "+t):e.postMessage({indexLoaded:!0})});break;case"search":e.postMessage("WORKER STARTED: "+r.cmd+" - "+r.text),e.index?e.postMessage({results:e.index.search(r.text).map(function(t){return{code:t.ref,description:e.graph[t.ref].d}})}):e.postMessage("Index not ready");break;default:e.postMessage("Unknown command: "+r.msg)}})}}),require.register("scripts/graphCyto.js",function(e,t,r){var n=t("cytoscape"),a=t("cytoscape-qtip"),o=t("cytoscape-dagre"),i=t("dagre");window.jQuery=t("jquery");t("qtip2");a(n,window.jQuery),o(n,i);var s={init:function(e){e.html(""),s.cy=n({container:e,boxSelectionEnabled:!1,autounselectify:!0,style:[{selector:"node",style:{"background-color":"red",label:"data(label)",content:"data(label)"}},{selector:"edge",style:{width:4,"target-arrow-shape":"triangle","line-color":"#9dbaea","target-arrow-color":"#9dbaea"}}]})},test:function(){s.cy.add([{group:"nodes",data:{weight:75,id:"n1",label:"node 1"}},{group:"nodes",data:{weight:75,id:"n2",label:"node 2"}},{group:"edges",data:{source:"n1",target:"n2"}}]),s.layout()},clear:function(){s.cy.off("click","node"),s.cy.remove(s.cy.elements("[weight!=50]"))},addNodes:function(e,t){s.cy.add([{group:"nodes",data:{weight:75,id:e.id,label:e.label}},{group:"nodes",data:{weight:75,id:t.id,label:t.label}},{group:"edges",data:{source:e.id,target:t.id}}])},layout:function(){s.cy.layout({name:"dagre",nodeSep:5,rankDir:"LR"}),s.cy.off("click","node"),s.cy.on("click","node",function(e){var t=e.cyTarget;console.log(e),t.qtip({content:t.data("label"),position:{my:"top center",at:"bottom center",target:t},style:{classes:"qtip-bootstrap",tip:{width:16,height:8}},hide:{event:"unfocus"}},e)})}};r.exports=s}),require.register("scripts/graphSigm.js",function(e,t,r){var n=t("sigma"),a={init:function(e){e.html(""),e.removeAttr("style"),a.s=new n({container:e})},clear:function(){a.s.graph.clear()},test:function(){a.s.graph.addNode({id:"n0",label:"Hello",size:10,color:"#f00"}).addNode({id:"n1",label:"World !",size:10,color:"#00f"}).addEdge({id:"e0",source:"n0",target:"n1"}),console.log(a.s.graph.nodes(),a.s.graph.edges()),a.s.refresh()},addNodes:function(e,t){a.s.graph.nodes(e.id)||a.s.graph.addNode({id:e.id,label:"Hello",x:0,y:0,size:1,color:"#f00"}),a.s.graph.nodes(t.id)||a.s.graph.addNode({id:t.id,label:"Hello",x:0,y:0,size:1,color:"#f00"}),a.s.graph.addEdge({id:e.id+"-"+t.id,source:e.id,target:t.id})},layout:function(){a.s.refresh()}};r.exports=a}),require.register("scripts/graphViva.js",function(e,t,r){var n=t("vivagraphjs"),a={init:function(e){e.html(""),a.g=n.Graph.graph();var t=10,r=n.Graph.View.svgGraphics();r.node(function(e){var r=n.Graph.svg("g"),a=n.Graph.svg("text").attr("y","-15px").attr("x","-"+t/4+"px").text(e.data?e.data.label:"label");return titleTXT=n.Graph.svg("text").attr("y","-3px").attr("x","-"+t/4+"px").text(e.id).attr("fill","#2CA1F4"),img=n.Graph.svg("rect").attr("width",t).attr("height",t).attr("fill","#1A8CE1"),r.append(a),r.append(titleTXT),r.append(img),r}).placeNode(function(e,r){e.attr("transform","translate("+(r.x-t/2)+","+(r.y-t/2)+")")}),a.r=n.Graph.View.renderer(a.g,{container:document.getElementById(e.attr("id")),graphics:r})},test:function(){a.g.addLink(1,2),a.r.run()},clear:function(){a.g.clear()},addNodes:function(e,t){a.g.addNode(e.id,{label:e.label}),a.g.addNode(t.id,{label:t.label}),a.g.addLink(e.id,t.id)},layout:function(){a.r.run()}};r.exports=a}),require.register("scripts/worker.js",function(e,t,r){r.exports=function(e){var t="("+e+")(self)\n\n//# sourceMappingURL: name.js",r=window.URL||window.webkitURL||window.mozURL||window.msURL,n=new Blob([t],{type:"text/javascript"}),a=r.createObjectURL(n),o=new Worker(a);return"function"==typeof r.revokeObjectURL&&r.revokeObjectURL(a),o}}),require.register("___globals___",function(e,t,r){})}(),require("___globals___");